/*
 * pepperSlider
 *
 * Copyright (c) 2012-2015 Damien SEGUIN - http://damienseguin.me
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Version: 2.0.6
 *
 */
!function(a,b,c){var d="pepperSlider",e=b.document,f={activeClass:"pepperSliderActiveClass",animation:"fade",continuous:!0,keyboardNav:!1,timer:3e3,speed:300,parallax:"",easing:"linear",touch:!1,touchSensitivity:30,overStop:!1,startAt:1,stopAtBounds:!1,pagination:{id:"",type:""},stopPropagation:!0},g=function(b,c){this.$element=a(b),this.$elementList=a(b).find("> ul"),this.$elementListAndPagination=a(b).find("> ul, > ol"),this.options=a.extend({},f,c),this._defaults=f,this._name=d,this.activeSlide=this.options.startAt,this._init()};g.prototype={_init:function(){if(this.length=this.$elementList.find("> li").length,this._animate(this.options.startAt),this.options.continuous&&(this.isRunning=!0,this.interval=setInterval(a.proxy(this._switchActive,this),this.options.timer)),this.resetElementListWidth(),this.options.stopAtBounds&&(this.reachBound=this.startAt==this.length?!0:!1),this.options.pagination.id){var b=1;if("[object Array]"===Object.prototype.toString.call(this.options.pagination.type))for(;b<this.options.pagination.type.length+1;)b==this.options.startAt?a(e.createElement("li")).addClass(this.options.activeClass).html("<a data-controls="+b+" href='#'>"+this.options.pagination.type[b-1]+"</a>").appendTo("#"+this.options.pagination.id):a(e.createElement("li")).html("<a data-controls="+b+" href='#'>"+this.options.pagination.type[b-1]+"</a>").appendTo("#"+this.options.pagination.id),++b;else if("number"==this.options.pagination.type)for(;b<this.length+1;)b==this.options.startAt?a(e.createElement("li")).addClass(this.options.activeClass).html("<a data-controls="+b+" href='#'>"+b+"</a>").appendTo("#"+this.options.pagination.id):a(e.createElement("li")).html("<a data-controls="+b+" href='#'>"+b+"</a>").appendTo("#"+this.options.pagination.id),++b}this.$element.on("click","a[data-controls]",a.proxy(this._on,this)),this.options.keyboardNav&&(that=this,a(e).keydown(function(a){switch(a.keyCode){case 37:that._switchActive("prev");break;case 39:that._switchActive("next")}})),this.options.touch&&this.$element.on("touchstart",a.proxy(this._onTouchStart,this)),this.options.overStop&&this.$element.on("mouseenter mouseleave",a.proxy(this._on,this))},_on:function(b){"mouseenter"==b.type&&this.interval?(this.isRunning=!1,clearInterval(this.interval)):"mouseleave"==b.type?(this.isRunning=!0,clearInterval(this.interval),this.interval=setInterval(a.proxy(this._switchActive,this),this.options.timer)):"click"==b.type&&(b.preventDefault(),this.options.stopPropagation&&b.stopImmediatePropagation(),control=a(b.currentTarget).data("controls"),control!==c&&this._switchActive(control))},resetElementListWidth:function(a){"cycle"==this.options.animation&&(this.$elementList.css("width",this.length*this.$element.width()),a&&this._animate(this.activeSlide))},_onTouchStart:function(b){var c=b.originalEvent;1==c.touches.length&&(startX=c.touches[0].pageX,startY=c.touches[0].pageY,isMoving=!0,this.$element.on("touchmove",a.proxy(this._onTouchMove,this)))},_onTouchMove:function(a){var b=a.originalEvent;if(isMoving){{var c=b.touches[0].pageX,d=b.touches[0].pageY,e=startX-c;startY-d}Math.abs(e)>=this.options.touchSensitivity&&(this._resetTouch(),this._switchActive(e>0?"next":"prev"))}},_resetTouch:function(){this.$element.off("touchmove",a.proxy(this._onTouchMove,this)),startX=null,isMoving=!1},_animate:function(b){var d=this.$elementListAndPagination.find("."+this.options.activeClass),e=this.$elementListAndPagination.find("> li:nth-child("+b+")");oldActive=this.$elementList.find("."+this.options.activeClass),newActive=this.$elementList.find("> li:nth-child("+b+")"),d.removeClass(this.options.activeClass),e.addClass(this.options.activeClass);var f=a.Event("beforeAnimate",{slide:e});if(this.$element.trigger(f),a("html").hasClass("no-csstransitions")&&"fade"==this.options.animation&&(oldActive.fadeOut(),newActive.fadeIn()),"cycle"==this.options.animation&&(a("html").hasClass("no-csstransitions")?this.$elementList.stop(!0).animate({left:-e.position().left},this.options.speed,this.options.easing):this.$elementList.css({left:-e.position().left})),this.options.parallax){var g=this;this.$elementList.children(":lt("+(b-1)+")").removeClass("after").addClass("before"),this.$elementList.children(":gt("+(b-1)+")").removeClass("before").addClass("after"),this.$elementList.find("."+g.options.parallax+" *").each(function(){offset=a(this).data("offset"),offset===c&&(offset=g.options.speed/2),a(this).parent().parent().hasClass(g.options.activeClass)?a(this).stop(!0).animate({"margin-left":0},500,g.options.easing):a(this).parent().parent().hasClass("before")?a(this).stop(!0).animate({"margin-left":-offset},500,g.options.easing):a(this).parent().parent().hasClass("after")&&a(this).stop(!0).animate({"margin-left":offset},500,g.options.easing)})}f=a.Event("afterAnimate",{slide:e}),this.$element.trigger(f)},_switchActive:function(b){var c=this.$elementList.find("."+this.options.activeClass),d=this.$elementList.find("> li").index(c);"string"==typeof b||"undefined"==typeof b?("onoff"==b&&($targetIndex=d,this.isRunning=!this.isRunning),"next"==b||"undefined"==typeof b?($targetIndex=d+1,this.options.continuous&&(this.isRunning=!0)):"prev"==b&&($targetIndex=d-1,this.options.continuous&&(this.isRunning=!0)),$targetIndex>this.length-1?this.options.stopAtBounds?(this.isRunning=!1,$targetIndex=d):$targetIndex=0:$targetIndex<0&&(this.options.stopAtBounds?(this.isRunning=!1,$targetIndex=d):$targetIndex=this.length-1),$targetIndex+=1):"number"==typeof b&&($targetIndex=b),(this.interval&&"undefined"!=typeof b||"onoff"==b||this.isRunning===!1)&&(clearInterval(this.interval),this.isRunning&&(this.interval=setInterval(a.proxy(this._switchActive,this),this.options.timer))),this.activeSlide=$targetIndex,this._animate($targetIndex)}},a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new g(this,b))})}}(jQuery,window);